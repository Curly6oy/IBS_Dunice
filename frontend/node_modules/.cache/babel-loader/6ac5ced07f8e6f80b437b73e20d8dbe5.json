{"ast":null,"code":"import axios from 'axios';\nimport { toastr } from 'react-redux-toastr';\nimport { initialize } from 'redux-form';\nimport { showTabs, selectTab } from '../common/tab/tabActions';\nimport consts from '../consts';\nvar INITIAL_VALUES = {};\nexport function getList() {\n  var request = axios.get(\"\".concat(consts.API_URL, \"/rooms\"));\n  return {\n    type: 'ROOMS_FETCHED',\n    payload: request\n  };\n}\nexport var create = function create(room) {\n  return function (dispatch) {\n    axios.post('/api/rooms', room).then(function (resp) {\n      dispatch({\n        type: 'ROOM_CREATE',\n        payload: resp.data\n      });\n    }).catch(function (error) {\n      console.error(\"Ошибка при создании комнаты: \", error);\n    });\n  };\n};\nexport var update = function update(room) {\n  return function (dispatch) {\n    axios.put(\"/api/rooms/\".concat(room.id), room).then(function (resp) {\n      dispatch({\n        type: 'ROOM_UPDATE',\n        payload: resp.data\n      });\n    }).catch(function (error) {\n      console.error(\"Ошибка при обновлении комнаты: \", error);\n    });\n  };\n};\nexport function remove(values) {\n  return submit(values, 'delete');\n}\n\nfunction submit(values, method) {\n  return function (dispatch) {\n    var id = values.id ? values.id : '';\n    axios[method](\"\".concat(consts.API_URL, \"/rooms/\").concat(id), values).then(function (resp) {\n      toastr.success('Успешно', 'Операция выполнена.');\n      dispatch(init());\n    }).catch(function (e) {\n      e.response.data.errors.forEach(function (error) {\n        return toastr.error('Ошибка', error);\n      });\n    });\n  };\n}\n\nexport function prepareToShow(roomId, callback) {\n  return function (dispatch) {\n    axios['get'](\"\".concat(consts.API_URL, \"/rooms/\").concat(roomId)).then(function (room) {\n      dispatch(callback(room.data));\n    }).catch(function (e) {\n      e.response.data.errors.forEach(function (error) {\n        return toastr.error('Ошибка', error);\n      });\n    });\n  };\n}\nexport function showUpdate(room) {\n  return [showTabs('tabUpdate'), selectTab('tabUpdate'), initialize('roomForm', room)];\n}\nexport function showDelete(room) {\n  return [showTabs('tabDelete'), selectTab('tabDelete'), initialize('roomForm', room)];\n}\nexport var init = function init() {\n  return function (dispatch) {\n    // Инициализация действий, например, загрузка списка комнат\n    axios.get('/api/rooms').then(function (resp) {\n      dispatch({\n        type: 'ROOM_LIST',\n        payload: resp.data\n      });\n    }).catch(function (error) {\n      console.error(\"Ошибка при загрузке комнат: \", error);\n    });\n  };\n};","map":{"version":3,"sources":["F:\\Scripts\\IBS_Dunice\\frontend\\src\\room\\roomActions.js"],"names":["axios","toastr","initialize","showTabs","selectTab","consts","INITIAL_VALUES","getList","request","get","API_URL","type","payload","create","room","dispatch","post","then","resp","data","catch","error","console","update","put","id","remove","values","submit","method","success","init","e","response","errors","forEach","prepareToShow","roomId","callback","showUpdate","showDelete"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { toastr } from 'react-redux-toastr'\nimport { initialize } from 'redux-form'\nimport { showTabs, selectTab } from '../common/tab/tabActions'\nimport consts from '../consts'\n\nconst INITIAL_VALUES = {}\n\nexport function getList() {\n    const request = axios.get(`${consts.API_URL}/rooms`)\n    return {\n        type: 'ROOMS_FETCHED',\n        payload: request\n    }\n}\n\nexport const create = (room) => {\n    return dispatch => {\n        axios.post('/api/rooms', room)\n            .then(resp => {\n                dispatch({ type: 'ROOM_CREATE', payload: resp.data })\n            })\n            .catch(error => {\n                console.error(\"Ошибка при создании комнаты: \", error)\n            })\n    }\n}\nexport const update = (room) => {\n    return dispatch => {\n        axios.put(`/api/rooms/${room.id}`, room)\n            .then(resp => {\n                dispatch({ type: 'ROOM_UPDATE', payload: resp.data })\n            })\n            .catch(error => {\n                console.error(\"Ошибка при обновлении комнаты: \", error)\n            })\n    }\n}\n\nexport function remove(values) {\n    return submit(values, 'delete')\n}\n\nfunction submit(values, method) {\n    return dispatch => {\n        const id = values.id ? values.id : ''\n        axios[method](`${consts.API_URL}/rooms/${id}`, values)\n            .then(resp => {\n                toastr.success('Успешно', 'Операция выполнена.')\n                dispatch(init())\n            })\n            .catch(e => {\n                e.response.data.errors.forEach(error => toastr.error('Ошибка', error))\n            })\n    }\n}\n\nexport function prepareToShow(roomId, callback) {\n    return dispatch => {\n        axios['get'](`${consts.API_URL}/rooms/${roomId}`)\n            .then(room => { dispatch(callback(room.data)) })\n            .catch(e => {\n                e.response.data.errors.forEach(error => toastr.error('Ошибка', error))\n            })\n    }\n}\n\nexport function showUpdate(room) {\n    return [\n        showTabs('tabUpdate'),\n        selectTab('tabUpdate'),\n        initialize('roomForm', room)\n    ]\n}\n\nexport function showDelete(room) {\n    return [\n        showTabs('tabDelete'),\n        selectTab('tabDelete'),\n        initialize('roomForm', room)\n    ]\n}\n\nexport const init = () => {\n    return dispatch => {\n        // Инициализация действий, например, загрузка списка комнат\n        axios.get('/api/rooms')\n            .then(resp => {\n                dispatch({ type: 'ROOM_LIST', payload: resp.data })\n            })\n            .catch(error => {\n                console.error(\"Ошибка при загрузке комнат: \", error)\n            })\n    }\n}\n"]},"metadata":{},"sourceType":"module"}